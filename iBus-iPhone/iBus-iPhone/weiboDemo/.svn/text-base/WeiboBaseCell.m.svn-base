//
//  WeiboBaseCell.m
//  FastEasyBlog
//
//  Created by yanghua_kobe on 9/12/12.
//  Copyright (c) 2012 yanghua_kobe. All rights reserved.
//

#import "WeiboBaseCell.h"

@interface WeiboBaseCell ()

@property (nonatomic,retain) UIImageView    *headImgView;


@end

@implementation WeiboBaseCell

@synthesize headImgView,
			headImage,
			userName,
			comeFrom,
			publishDate;

-(void)dealloc{
	//properties
	[headImage release],headImage=nil;
	[userName release],userName=nil;
	[comeFrom release],comeFrom=nil;
    
    //fields
	[topView release],topView=nil;
	[contentView release],contentView=nil;
	[footerView release],footerView=nil;
	[headImgView release],headImgView=nil;
	[nameLabel release],nameLabel=nil;
	[comeFromLabel release],comeFromLabel=nil;
    [dateLabel release],dateLabel=nil;
    
    [_weiboInfo release],_weiboInfo=nil;
	
	[super dealloc];
}

- (id)initWithStyle:(UITableViewCellStyle)style
    reuseIdentifier:(NSString *)reuseIdentifier
          weiboInfo:(NSDictionary *)weiboInfo
{
    self=[super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        
        self.selectionStyle=UITableViewCellSelectionStyleNone;
        _weiboInfo=[weiboInfo retain];
        
        topView=[[UIView alloc]initWithFrame:CGRectMake(0,0,320,50)];
        [self addSubview:topView];
        
        //头像
        UIImageView *imgView=[[UIImageView alloc]initWithFrame:CGRectMake(10,10,40,40)];
        self.headImgView=imgView;
        [imgView release];
        [topView addSubview:self.headImgView];
        
        nameLabel=[[UILabel alloc]initWithFrame:CGRectMake(53,18,165,20)];
        [nameLabel setFont:[UIFont systemFontOfSize:16]];
        [nameLabel setTextColor:defaultNavigationBGColor];
        nameLabel.textAlignment=UITextAlignmentLeft;
        [topView addSubview:nameLabel];
        
        dateLabel=[[UILabel alloc]initWithFrame:CGRectMake(230, 18, 80, 20)];
        [dateLabel setFont:[UIFont systemFontOfSize:11]];
        dateLabel.textAlignment=UITextAlignmentRight;
        [topView addSubview:dateLabel];

        //content view(容器)
        contentView=[[UIView alloc]initWithFrame:CGRectZero];		//高度不定
        contentView.tag=7000;
        [self addSubview:contentView];
        
        //footer view(容器)
        footerView=[[UIView alloc]initWithFrame:CGRectZero];		//高度不定(随内容视图高度而定)
        [self addSubview:footerView];
        
        comeFromLabel=[[UILabel alloc]initWithFrame:CGRectMake(125,0,180,20)];
        comeFromLabel.textAlignment=UITextAlignmentRight;
        comeFromLabel.font=[UIFont systemFontOfSize:13.0f];
        [footerView addSubview:comeFromLabel];
    }
    return self;
}

- (void)setSelected:(BOOL)selected
           animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
}

- (void)setContentForViews{
    nameLabel.text=_weiboInfo[@"creator"][@"userName"];
    dateLabel.text=[GlobalInstance resolveWeiboDate:[_weiboInfo[@"createTime"] doubleValue]];
    comeFromLabel.text=@"Wisedu";
}

- (void)resizeViewFrames{
    //to be override...
}


#pragma mark - override setters -
-(void)setHeadImage:(UIImage*)_img{
	if(_img!=headImage){
		[headImage release];
		headImage=[_img retain];
	}
	headImgView.image=_img;
}


@end
